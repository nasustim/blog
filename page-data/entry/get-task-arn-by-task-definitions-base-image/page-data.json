{"componentChunkName":"component---src-pages-entry-markdown-remark-frontmatter-slug-tsx","path":"/entry/get-task-arn-by-task-definitions-base-image/","result":{"data":{"markdownRemark":{"rawMarkdownBody":"\n<code>\ntask_arns=$(aws ecs list-tasks --cluster <クラスタ名> | jq -c -r '.taskArns[]')\n# 実行中のtask arnの一覧を取得\n\nfor task in $tasks; do \\\n  image_name=$( aws ecs describe-tasks --cluster <クラスタ名> --tasks $task | jq -c -r '.tasks[0].containers[0].image' ) # タスク 1 つ, コンテナ 1 つの場合\n\nif [[\"$image\" =~ ^\"my-target-image:latest\"$]]; then\necho $task # my-target-image:latest をベースイメージにしたタスク\nfi\ndone\n\n</code>\n\nspecial thanks: ChatGPT\n\n<blockquote class=\"twitter-tweet\"><p lang=\"ja\" dir=\"ltr\">サンキューChatGPT <a href=\"https://t.co/uMel5BhAkc\">pic.twitter.com/uMel5BhAkc</a></p>&mdash; おみつ (@nasustim) <a href=\"https://twitter.com/nasustim/status/1623988756683591680?ref_src=twsrc%5Etfw\">February 10, 2023</a></blockquote> <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n","frontmatter":{"date":"February 14, 2023","slug":"/get-task-arn-by-task-definitions-base-image","title":"AWS CLIでベースイメージからECSで実行中のタスクのarnを取得する"}}},"pageContext":{"id":"59cda673-8c93-5eb9-a003-3bcd53afee54","frontmatter__slug":"/get-task-arn-by-task-definitions-base-image","__params":{"frontmatter__slug":"get-task-arn-by-task-definitions-base-image"}}},"staticQueryHashes":[],"slicesMap":{}}